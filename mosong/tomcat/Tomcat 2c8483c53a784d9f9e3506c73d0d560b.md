# Tomcat

Created: Feb 1, 2021 6:17 PM

# Tomcat

## 개요

- 아파치 소프트웨어 재단에서 개발한 Java 기반의 **서블릿 컨테이너**이자 **웹서버(?)**.
- **JSP/spring**으로 웹 사이트를 구현시 필수로 사용됨
- 오직 서블릿/JSP 및 **HTTP 처리 엔진**만 들어가 있음 (+J2EE API 추가시 엔터프라이즈 버전 배포중)
- 한국은 정부 기준때문에 많이 쓰이지만 서구권은 **ASP** 비중도 꽤 큼

## 서블릿(Servlet)?

> 클라이언트 요청을 처리 후 결과를 반환하는 Servlet Class의 구현 규칙을 지킨 자바 웹 프로그래밍

- Server program + let의 합성어로 자바로 웹 프로그래밍을 쉽게 개발할 수 있도록 해주는 API
- Java 코드안에 HTML태그가 삽입되 있음(.java) → HTML을 사용해서 request/response
- Java Thread를 이용하여 동작한다.
- MVC 패턴에서 Controller로 이용된다.
- HTTP 프로토콜 서비스를 지원하는 javax.servlet.http.HttpServlet 클래스를 상속받는다. → UDP보다 처리 속도가 느리다.(상속 과정이 있어서 속도가 느린건가(?))
- HTML 변경 시 Servlet을 재컴파일해야 하는 단점이 있다.

## 서블릿 컨테이너?

- **통신 지원 :** 서블릿과 웹 서버가 통신할 수 있는 손쉬운 방법을 제공한다. 우리가 통신을 한다고 생각할 때 소켓을 만들고, 특정 포트를 리스닝하고, 연결 요청이 들어오면 스트림을 생성해서 요청을 받는다고 알고있는데 이 과정을 서블릿 컨테이너가 대신 해주는 것이다. 서블릿 컨테이너는 이런 통신 과정을 API 로 제공하고 있기 때문에 우리가 쉽게 사용할 수 있다.
- **생명주기 관리:** 서블릿 컨테이너가 기동되는 순간 서블릿 클래스를 로딩해서 인스턴스화하고, 초기화 메서드를 호출하고, 요청이 들어오면 적절한 서블릿 메소드를 찾아서 호출한다. 만약 서블릿의 생명이 다하는 순간 가비지 컬렉션을 진행한다.
- **멀티스레딩 관리 :** 서블릿 컨테이너는 해당 서블릿의 요청이 들어오면 스레드를 생성해서 작업을 수행한다. 즉 동시의 여러 요청이 들어온다면 멀티스레딩 환경으로 동시다발적인 작업을 관리한다. → 여러 스레드에서 동시에 한 서블릿을 사용하기에 데이터 공유에 문제가 발생할 수 있음.
- **선언적인 보안관리 :** 서블릿 컨테이너는 보안 관련된 기능을 지원한다. 따라서 서블릿 코드 안에 보안 관련된 메소드를 구현하지 않아도 된다.
- **JSP 지원**

## JSP vs 서블릿

- JSP가 HTMP 문서 안에서 Java 코드를 포함하는 반면, 서블릿은 자바 코드 안에 HTML을 포함하고 있음 → JSP는 view에 좋고 서블릿은 controller에 좋다 → MVC에 적용(?)
- JSP는 서블릿 기반의 '서버 스크립트 기술(미리 약속한 규정에 따라 키워드를 조합 후 입력시 실행 시점에 각 키워드에 매핑되어 있는 어떤 코드로 변환 후 실행되는 기술)'
- 즉, 키워드가 태그화되어 있고 자바코드를 <% %>태그 안에서 처리하거나 HTML처럼 태그를 사용하여 자바코드도 작성 가능
- JSP는 request의 결과를 나타낼 때 유용하고 서블릿은 DB와의 통신, 데이터를 읽고 확인하는 작업 등에 유용
- JSP는 수정 후 재배포할 필요가 없이 WAS(web application server)에서 알아서 처리해주지만 서블릿은 해당 Java코드를 컴파일한 후

## 그래서 본론인 아파치 톰캣

> 정적 웹페이지 처리만 하는 아파치에 동적 데이터 처리를 도와주는 서블릿 컨테이너

![Tomcat%202c8483c53a784d9f9e3506c73d0d560b/Untitled.png](Tomcat%202c8483c53a784d9f9e3506c73d0d560b/Untitled.png)

- 위 그림에서 웹 서버가 WAS안에 있지만 따로 웹서버를 쓰는데 그 이유는 웹서버는 정적 데이터를 처리하는 서버이기때문에 WAS를 이용하는 것보다 따로 웹 서버를 이용하는게 더 빠르고 안정적이다(?) → MVC 구조 탄생의 원인인가??

### ❓ 궁금한 점

- Intellij IDEA edu나 일반버전에서 할 수 있나?
- 아파치는 80포트, 톰캣은 8080포트로 처리한다? 포트 두개가 달라도 문제가 없나?
→ 실제로는 80포트로 다 처리하고 8080포트는 아파치가 알아서 보내줌. 실제로 8080포트를 컨트롤하려면 OS레벨로 내려가서 처리하거나 수동으로 포트 처리할 때(?) 빼고는 보기 힘듦
- Maven은 자바 프로젝트의 빌드를 자동화 해주는 빌드 툴? → 그냥 라이브러리 관리나, 플러그인이 어떤게 쓰여야하는지 알려주는 용도 아닌가? → Maven의 생명 주기를 알고 있어야 하나?
- javascript(클라이언트)가 jsp(서버)를 대체할 수 있지않나? 둘다 HTML에서 다루고 동적 처리를 해줘서 결과를 브라우저에 보여주는 거니까?
→ 유저에게 공개하지 않고 서버 결과를 보기위해서 쓰이는건가? → 그래서 JSP를 쓰기 싫어서 나온게 Node.js인가? 서버쪽 동적 처리도 javascript로 할 수 있도록?

### ⏭️ 다루고 싶은 것

- ...?

🔖 참고 자료

- [https://jusungpark.tistory.com/15](https://jusungpark.tistory.com/15)
- [https://mangkyu.tistory.com/14](https://mangkyu.tistory.com/14)
- [https://wodonggun.github.io/wodonggun.github.io/study/아파치-톰캣-차이.html](https://wodonggun.github.io/wodonggun.github.io/study/%EC%95%84%ED%8C%8C%EC%B9%98-%ED%86%B0%EC%BA%A3-%EC%B0%A8%EC%9D%B4.html)
- 서블릿 vs JSP : [https://gmlwjd9405.github.io/2018/11/04/servlet-vs-jsp.html](https://gmlwjd9405.github.io/2018/11/04/servlet-vs-jsp.html)
- [https://limmmee.tistory.com/4](https://limmmee.tistory.com/4)
- MVC 구조 탄생 관련 : [https://m.blog.naver.com/acornedu/221128616501](https://m.blog.naver.com/acornedu/221128616501)
- [https://atoz-develop.tistory.com/entry/IntelliJ-JAVA-웹-개발-환경-구축-방법-Maven-Tomcat](https://atoz-develop.tistory.com/entry/IntelliJ-JAVA-%EC%9B%B9-%EA%B0%9C%EB%B0%9C-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%B6%95-%EB%B0%A9%EB%B2%95-Maven-Tomcat)
- [http://sungbine.github.io/tech/post/2015/02/15/tomcat과 apache의 연동.html](http://sungbine.github.io/tech/post/2015/02/15/tomcat%EA%B3%BC%20apache%EC%9D%98%20%EC%97%B0%EB%8F%99.html)
- [https://goddaehee.tistory.com/199](https://goddaehee.tistory.com/199)
- [https://mangkyu.tistory.com/8](https://mangkyu.tistory.com/8)
- [https://asfirstalways.tistory.com/181?category=670025](https://asfirstalways.tistory.com/181?category=670025)
- MVC 설명 : [https://newindow.tistory.com/66](https://newindow.tistory.com/66), [https://gmlwjd9405.github.io/2018/11/04/servlet-vs-jsp.html](https://gmlwjd9405.github.io/2018/11/04/servlet-vs-jsp.html)
- [https://themach.tistory.com/68](https://themach.tistory.com/68)
- 서블릿 개념 + 스프링 : [https://jeong-pro.tistory.com/222](https://jeong-pro.tistory.com/222)